<!doctype html><html class="not-ready text-sm lg:text-base" style=--bg:#faf6f1 lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>PHP Design Patterns: Prototype Pattern - Wern Ancheta</title><meta name=theme-color><meta name=description content="This is the 16th post in a series of articles that will walk you through how to implement design patterns in PHP.
In this part, we&rsquo;re going to take a look at how you can implement the Prototype Pattern.
The Prototype Pattern is used for creating new objects by means of cloning. Since you no longer have to create individual classes, this effectively replaces inheritance with composition.
To implement the Prototype Pattern, we make use of the clone keyword to make shallow copies of objects."><meta name=author content="Wern Ancheta"><link rel="preload stylesheet" as=style href=https://anchetaWern.github.io/main.min.css><link rel=preload as=image href=https://anchetaWern.github.io/theme.png><link rel=preload as=image href=https://anchetaWern.github.io/twitter.svg><link rel=preload as=image href=https://anchetaWern.github.io/github.svg><link rel=preload as=image href=https://anchetaWern.github.io/instagram.svg><link rel=preload as=image href=https://anchetaWern.github.io/rss.svg><link rel=icon href=https://anchetaWern.github.io/favicon.ico><link rel=apple-touch-icon href=https://anchetaWern.github.io/apple-touch-icon.png><meta name=generator content="Hugo 0.110.0"><meta property="og:title" content="PHP Design Patterns: Prototype Pattern"><meta property="og:description" content="This is the 16th post in a series of articles that will walk you through how to implement design patterns in PHP.
In this part, we&rsquo;re going to take a look at how you can implement the Prototype Pattern.
The Prototype Pattern is used for creating new objects by means of cloning. Since you no longer have to create individual classes, this effectively replaces inheritance with composition.
To implement the Prototype Pattern, we make use of the clone keyword to make shallow copies of objects."><meta property="og:type" content="article"><meta property="og:url" content="https://anchetaWern.github.io/posts/prototype-pattern-in-php/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-04-23T00:00:00+00:00"><meta property="article:modified_time" content="2023-04-23T00:00:00+00:00"><meta itemprop=name content="PHP Design Patterns: Prototype Pattern"><meta itemprop=description content="This is the 16th post in a series of articles that will walk you through how to implement design patterns in PHP.
In this part, we&rsquo;re going to take a look at how you can implement the Prototype Pattern.
The Prototype Pattern is used for creating new objects by means of cloning. Since you no longer have to create individual classes, this effectively replaces inheritance with composition.
To implement the Prototype Pattern, we make use of the clone keyword to make shallow copies of objects."><meta itemprop=datePublished content="2023-04-23T00:00:00+00:00"><meta itemprop=dateModified content="2023-04-23T00:00:00+00:00"><meta itemprop=wordCount content="554"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="PHP Design Patterns: Prototype Pattern"><meta name=twitter:description content="This is the 16th post in a series of articles that will walk you through how to implement design patterns in PHP.
In this part, we&rsquo;re going to take a look at how you can implement the Prototype Pattern.
The Prototype Pattern is used for creating new objects by means of cloning. Since you no longer have to create individual classes, this effectively replaces inheritance with composition.
To implement the Prototype Pattern, we make use of the clone keyword to make shallow copies of objects."></head><body class="text-black duration-200 ease-out dark:text-white"><header class="mx-auto flex h-[5rem] max-w-3xl px-8 lg:justify-center"><div class="relative z-50 mr-auto flex items-center"><a class="-translate-x-[1px] -translate-y-0.5 text-3xl font-bold" href=https://anchetaWern.github.io/>Wern Ancheta</a>
<a class="btn-dark ml-6 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.svg)_left_center/cover_no-repeat] dark:invert dark:[background-position:right]"></a></div><a class="btn-menu relative z-50 -mr-8 flex h-[5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden"></a>
<script>const htmlClass=document.documentElement.classList;setTimeout(()=>{htmlClass.remove("not-ready")},10);const btnMenu=document.querySelector(".btn-menu");btnMenu.addEventListener("click",()=>{htmlClass.toggle("open")});const metaTheme=document.querySelector('meta[name="theme-color"]'),lightBg=`"#faf6f1"`.replace(/"/g,""),setDark=e=>{metaTheme.setAttribute("content",e?"#000":lightBg),htmlClass[e?"add":"remove"]("dark"),localStorage.setItem("dark",e)},darkScheme=window.matchMedia("(prefers-color-scheme: dark)");if(htmlClass.contains("dark"))setDark(!0);else{const e=localStorage.getItem("dark");setDark(e?e==="true":darkScheme.matches)}darkScheme.addEventListener("change",e=>{setDark(e.matches)});const btnDark=document.querySelector(".btn-dark");btnDark.addEventListener("click",()=>{setDark(localStorage.getItem("dark")!=="true")})</script><div class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"><nav class="mt-12 flex justify-center space-x-10 dark:invert lg:mt-0 lg:ml-12 lg:items-center lg:space-x-6"><a class="h-8 w-8 [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./twitter.svg) href=https://twitter.com/wernancheta target=_blank></a>
<a class="h-8 w-8 [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./github.svg) href=https://github.com/anchetaWern target=_blank></a>
<a class="h-8 w-8 [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./instagram.svg) href=https://instagram.com/wernancheta target=_blank></a>
<a class="h-8 w-8 [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./rss.svg) href=https://anchetaWern.github.io/index.xml target=_blank></a></nav></div></header><main class="prose prose-neutral relative mx-auto min-h-[calc(100%-10rem)] max-w-3xl px-8 pt-20 pb-32 dark:prose-invert"><article><header class=mb-20><h1 class="!my-0 pb-2.5">PHP Design Patterns: Prototype Pattern</h1><div class="text-sm opacity-60"><time>Apr 23, 2023</time>
<span class=mx-1>&#183;</span>
<span>Wern Ancheta</span></div></header><section><p>This is the 16th post in a series of articles that will walk you through how to implement design patterns in PHP.</p><p>In this part, we&rsquo;re going to take a look at how you can implement the Prototype Pattern.</p><p>The Prototype Pattern is used for creating new objects by means of cloning. Since you no longer have to create individual classes, this effectively replaces inheritance with composition.</p><p>To implement the Prototype Pattern, we make use of the <code>clone</code> keyword to make shallow copies of objects. The clone will then have the same properties as its source.</p><p>Here we have a <code>Ninja</code> class. This is the class whose instance we will be cloning later on. When instantiating a new object, you pass in the name, chakra level, and the techniques of the ninja. We also have the <code>setChakra</code> and <code>setTechniques</code> methods which we&rsquo;ll be using later on to modify the cloned object. Lastly, we can specify the cloning behavior via the <code>__clone</code> magic method. Here we&rsquo;re simply changing the name to include &ldquo;Copy of " plus the name that was given to the original:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span> 
</span></span><span style=display:flex><span><span style=color:#75715e>// prototypepattern/app/Ninja.php
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>PrototypePattern\App</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>PrototypePattern\App\NinjaInterface</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Ninja</span> <span style=color:#66d9ef>implements</span> <span style=color:#a6e22e>NinjaInterface</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> __construct(<span style=color:#66d9ef>public</span> <span style=color:#a6e22e>string</span> $name, <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>int</span> $chakra, <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>array</span> $techniques)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setChakra</span>(<span style=color:#a6e22e>int</span> $chakra)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>chakra</span> <span style=color:#f92672>=</span> $chakra;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setTechniques</span>(<span style=color:#66d9ef>array</span> $techniques)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>techniques</span> <span style=color:#f92672>=</span> $techniques;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> __clone()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Copy of &#34;</span> <span style=color:#f92672>.</span> $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>name</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>We&rsquo;re implementing a <code>NinjaInterface</code> because we&rsquo;ll be creating a factory for the <code>Ninja</code> class:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span> 
</span></span><span style=display:flex><span><span style=color:#75715e>// prototypepattern/app/NinjaInterface.php
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>PrototypePattern\App</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>NinjaInterface</span> 
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Here&rsquo;s the <code>NinjaFactory</code> which allows us to create copies of the original object that was passed. We&rsquo;re implemeting the prototype pattern through these three methods: <code>emptySlateNinja</code>, <code>ninjaWithChakra</code>, and <code>ninjaWithChakraAndTechniques</code> which is basically returning the same properties as the original:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span> 
</span></span><span style=display:flex><span><span style=color:#75715e>// prototypepattern/app/Factories/NinjaFactory.php
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>PrototypePattern\App\Factories</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>PrototypePattern\App\NinjaInterface</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>NinjaFactory</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> __construct(<span style=color:#66d9ef>private</span> <span style=color:#a6e22e>NinjaInterface</span> $ninja)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>emptySlateNinja</span>()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        $ninja <span style=color:#f92672>=</span> <span style=color:#66d9ef>clone</span> $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>ninja</span>; 
</span></span><span style=display:flex><span>        $ninja<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>setChakra</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>        $ninja<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>setTechniques</span>([]);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> $ninja;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>ninjaWithChakra</span>()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        $ninja <span style=color:#f92672>=</span> <span style=color:#66d9ef>clone</span> $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>ninja</span>;
</span></span><span style=display:flex><span>        $ninja<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>setTechniques</span>([]);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> $ninja;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>ninjaWithChakraAndTechniques</span>()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>clone</span> $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>ninja</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>To use it, simply create a new instance of the <code>Ninja</code> class and pass it to the <code>NinjaFactory</code>. From there, you can call any of the three methods I mentioned earlier to create a clone of the original <code>$ninja</code> object with different options:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span> 
</span></span><span style=display:flex><span><span style=color:#75715e>// prototypepattern/PrototypeTest.php
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>require_once</span> <span style=color:#66d9ef>__DIR__</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#39;/../vendor/autoload.php&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>PHPUnit\Framework\TestCase</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>PrototypeTest</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>TestCase</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>test_prototype</span>() <span style=color:#f92672>:</span> <span style=color:#a6e22e>void</span> 
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        $ninja <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>PrototypePattern\App\Ninja</span>(<span style=color:#e6db74>&#39;Naruto&#39;</span>, <span style=color:#ae81ff>100</span>, [<span style=color:#e6db74>&#39;rasengan&#39;</span>, <span style=color:#e6db74>&#39;kage bunshin&#39;</span>], <span style=color:#66d9ef>false</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>        $ninjaFactory <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>PrototypePattern\App\Factories\NinjaFactory</span>($ninja);
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>assertEquals</span>($ninjaFactory<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>emptySlateNinja</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>chakra</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>assertEquals</span>($ninjaFactory<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>emptySlateNinja</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>techniques</span>, []);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>assertEquals</span>($ninjaFactory<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>ninjaWithChakra</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>chakra</span>, <span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>assertEquals</span>($ninjaFactory<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>ninjaWithChakra</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>techniques</span>, []);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>assertEquals</span>($ninjaFactory<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>ninjaWithChakraAndTechniques</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>chakra</span>, <span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>assertEquals</span>($ninjaFactory<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>ninjaWithChakraAndTechniques</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>techniques</span>, [<span style=color:#e6db74>&#39;rasengan&#39;</span>, <span style=color:#e6db74>&#39;kage bunshin&#39;</span>]);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>To run this. Be sure to add the following on your <code>composer.json</code> file then run <code>composer dump-autoload</code>:</p><pre tabindex=0><code>&#34;autoload&#34;: {
    &#34;psr-4&#34;: {
        &#34;ProtoTypePattern\\App\\&#34;: &#34;prototypepattern/app/&#34;
    }
},
</code></pre><p>Also install phpunit (<code>composer require phpunit/phpunit</code>) if you haven&rsquo;t done so already.</p><p>You can then run it by executing the following:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>vendor/bin/phpunit prototypepattern/app/PrototypeTest.php
</span></span></code></pre></div><p>That&rsquo;s pretty much what the Prototype pattern is all about. It&rsquo;s simply a way to bypass having to create separate objects and passing in different options to it. Instead, we just clone existing objects and modify them accordingly. It&rsquo;s commonly used in tandem with the Factory pattern.</p><p>You can find the source code used in this tutorial on this <a href=https://github.com/anchetaWern/php-design-patterns>GitHub repo</a>.</p></section><nav class="mt-24 flex rounded-lg bg-black/[3%] p-1.5 text-lg dark:bg-white/[8%]"><a class="flex w-1/2 items-center rounded-md p-6 pr-3 no-underline hover:bg-black/[2%]" href=https://anchetaWern.github.io/posts/visitor-pattern-in-php/><span class=mr-1.5>←</span><span>PHP Design Patterns: Visitor Pattern</span></a>
<a class="ml-auto flex w-1/2 items-center justify-end rounded-md p-6 pl-3 no-underline hover:bg-black/[2%]" href=https://anchetaWern.github.io/posts/builder-pattern-in-php/><span>PHP Design Patterns: Builder Pattern</span><span class=ml-1.5>→</span></a></nav></article></main><footer class="opaco mx-auto flex h-[5rem] max-w-3xl items-center px-8 text-[0.9em] opacity-60"><div class=mr-auto>&copy; 2023
<a class=link href=https://anchetaWern.github.io/>Wern Ancheta</a></div><a class="link mx-6" href=https://gohugo.io/ rel=noopener target=_blank>Powered by Hugo️️</a>️
<a class=link href=https://github.com/nanxiaobei/hugo-paper rel=noopener target=_blank>▷ Paper 6</a></footer></body></html>